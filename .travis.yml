language: minimal

services: docker

env:
  - DOCKER_COMPOSE_VERSION=1.23.2

before_install:
  - docker -v && docker-compose -v
  - sudo rm /usr/local/bin/docker-compose
  - curl -L https://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname -s`-`uname -m` > docker-compose
  - chmod +x docker-compose
  - sudo mv docker-compose /usr/local/bin
  - curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl
  - chmod +x ./kubectl
  - sudo mv ./kubectl /usr/local/bin/kubectl

install:
  - docker-compose -f course-03/exercises/udacity-c3-deployment/docker/docker-compose-build.yaml build --parallel 

# language: minimal
# branches:
#   only:
#   - master
# cache:
#   directories:
#   - "$HOME/google-cloud-sdk"
# services: docker
# env:
#   matrix:
#   - DOCKER_COMPOSE_VERSION=1.23.2
#   global:
#   - secure: nxOZeYV0ir3FHRsL9Pw5Ee0v5NOi6I899inki1DD10Pu+NpHNEYn0oY2Qm/tLZaVnS3IYS2x5/gyfT2OVHLjOJlHVIyypAoFtc6G2OU49khZy8idwwJ3wbD8KJr8ZvopuIo4ZME4RSlWo5vM4p8svxP/n2fSEBRrgbvm7ddJnplR3rWlTHxKAfWVZ+r/76jdNtAcqtknxn7340QhRdk7SZvwZ1uRRxDiqwNvc7jcWDr/+Aqz98Z4nZIJuDHggUi0CS/hiQi6zFW9k0fKSvhR5FWOMxkE1FRMk+6NQ4xGku83jKApr0Lsb2uHlX2IEJnbc584tGcQ6ONaks268YaRFHrboBAZiMEC3ZOPWJqWLwo6YOKB1td5TAiG/LBw6RuuUHOYFGdkSqP7BGJG2QIpuvK4GbLSrduxhe/KIDOHF1KlVLdoXMTqYOn8q/VPhPryqSYZe0qlMAacjUiN0M6EbIS49vQq/cjCLuQkutBVO2bMAWzowgLzzSlkRL3VZssm3BRKpFAiS/HKX853BvF94bnwpqA60S/M4liAf7N2bsBCeS8o1Xp8HWA4JIDaOnI1rwy/jnO7G8EI903dKdfFoqIWBbpEH89UX33Xn3ziwK1HNgSjYqt/P6XZLjeeEA3rGcE7GhXfNBzFbQHQKRIPU7SLaLxoNGt/QdeiOl/W+4I=
#   - secure: H5I/4O3IujomATFR8qSZIdh8CrY2drH3+EqszLiBkEoJLCLz14dz33Sdd4L6pAUAVWcPTQPffL76DtpV4Mllv+RNLz5bDpjWYswFzZI0XmNtsL2uHndwqqv/rMmChnLJyZ266XO1FCC6XPHtAEevI+N2llnq/a8ZMA25SijLrBH1XWkeB6TQZfmQCAvhEkEOG/MQ1fvdT+G5JGT7mzRE34aRkP92pqOJMMmkut2gNQPPsrXayA53j9M72wQzzwlYbjpkAxQtnaTffJg/3th0NErs65WJEs0TwgXqXYljZ9mWBJRuVxKILhoc/O8QWrwEAbpyqc3Gm1Zq2qXymvwTthPFEYva1eCYxe4ruUdepPb3r3PQDpsB440EuwI9suD5cDnPNPxzplo4nFFrgctnYBONTokDiT0XCsTbHMWgEcQ0a/39i/qHRV4vn4+QwKdX1RVHNbkQuxyMk0f5GXQxzbU6nWHCYifnExG7v/jjSVvq0W7r7cHZBQL7uyIUhjEn4FlMapvsJcERlq9xa1pr4mIZ/mQDUlrqPIeiygxxoBaP+EwB77L9V6cSP1A37XKS0kEIKwq7JI/C2SzIJ5aO9ZQeu7kwoRJ+l4pnPOwXP0ErAbdyypBtRiS6JuE9d5x5Bn3UILIuwrfhgcAOzYSUx4VCe0xPR7PNMwhlNS2Wf/E=
# before_install:
# - docker -v && docker-compose -v
# - sudo rm /usr/local/bin/docker-compose
# - curl -L https://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname -s`-`uname -m` > docker-compose
# - chmod +x docker-compose
# - sudo mv docker-compose /usr/local/bin
# - curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl
# - chmod +x ./kubectl
# - sudo mv ./kubectl /usr/local/bin/kubectl
# install:
# - docker-compose -f course-03/exercises/udacity-c3-deployment/docker/docker-compose-build.yaml build --parallel
# - docker login -u ${DOCKER_USENAME} -p ${DOCKER_PASSWORD}
# - docker push lasz/udacity-restapi-feed:v0.1.2
# - docker push lasz/udacity-restapi-user:v0.1.2
# - docker push lasz/udacity-frontend
# - docker push lasz/reverse-proxy